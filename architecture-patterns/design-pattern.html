<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Design Patterns; Creational, Structural, Behavioral design | Today I Learned</title>
    <meta name="generator" content="VuePress 1.8.1">
    <link rel="icon" href="/TIL/logo.png">
    <meta name="description" content="Sunggwon's Personal Wiki (Today I Learned)">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.d32b1f14.css" as="style"><link rel="preload" href="/TIL/assets/js/app.c0d5b1c2.js" as="script"><link rel="preload" href="/TIL/assets/js/2.25c8762d.js" as="script"><link rel="preload" href="/TIL/assets/js/11.b27a3ed5.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.ef2ab4e4.js"><link rel="prefetch" href="/TIL/assets/js/100.02b37317.js"><link rel="prefetch" href="/TIL/assets/js/101.0886d9a8.js"><link rel="prefetch" href="/TIL/assets/js/102.0d563b5d.js"><link rel="prefetch" href="/TIL/assets/js/103.314a1aea.js"><link rel="prefetch" href="/TIL/assets/js/104.912f4771.js"><link rel="prefetch" href="/TIL/assets/js/105.a89f629c.js"><link rel="prefetch" href="/TIL/assets/js/106.95d1f3c7.js"><link rel="prefetch" href="/TIL/assets/js/107.32bd616d.js"><link rel="prefetch" href="/TIL/assets/js/108.6c57c7d2.js"><link rel="prefetch" href="/TIL/assets/js/109.505aaf7f.js"><link rel="prefetch" href="/TIL/assets/js/110.07bc78e3.js"><link rel="prefetch" href="/TIL/assets/js/111.5504060f.js"><link rel="prefetch" href="/TIL/assets/js/112.d889bff7.js"><link rel="prefetch" href="/TIL/assets/js/113.87ad8089.js"><link rel="prefetch" href="/TIL/assets/js/12.331a1c24.js"><link rel="prefetch" href="/TIL/assets/js/13.e9df51af.js"><link rel="prefetch" href="/TIL/assets/js/14.51ca65f0.js"><link rel="prefetch" href="/TIL/assets/js/15.e2c4bafe.js"><link rel="prefetch" href="/TIL/assets/js/16.576b80b9.js"><link rel="prefetch" href="/TIL/assets/js/17.c9240527.js"><link rel="prefetch" href="/TIL/assets/js/18.87bd5571.js"><link rel="prefetch" href="/TIL/assets/js/19.cee9e592.js"><link rel="prefetch" href="/TIL/assets/js/20.59dfd562.js"><link rel="prefetch" href="/TIL/assets/js/21.76779413.js"><link rel="prefetch" href="/TIL/assets/js/22.8f160fd5.js"><link rel="prefetch" href="/TIL/assets/js/23.0eb414fe.js"><link rel="prefetch" href="/TIL/assets/js/24.e22e03a2.js"><link rel="prefetch" href="/TIL/assets/js/25.dbdfe4e7.js"><link rel="prefetch" href="/TIL/assets/js/26.dc783e89.js"><link rel="prefetch" href="/TIL/assets/js/27.382e2a3f.js"><link rel="prefetch" href="/TIL/assets/js/28.17bbc70a.js"><link rel="prefetch" href="/TIL/assets/js/29.88ae4193.js"><link rel="prefetch" href="/TIL/assets/js/3.cec55781.js"><link rel="prefetch" href="/TIL/assets/js/30.556eee20.js"><link rel="prefetch" href="/TIL/assets/js/31.b1831991.js"><link rel="prefetch" href="/TIL/assets/js/32.a94e42ff.js"><link rel="prefetch" href="/TIL/assets/js/33.03d4975b.js"><link rel="prefetch" href="/TIL/assets/js/34.b6d539e6.js"><link rel="prefetch" href="/TIL/assets/js/35.4129e51c.js"><link rel="prefetch" href="/TIL/assets/js/36.3a6f57db.js"><link rel="prefetch" href="/TIL/assets/js/37.ad1a48c6.js"><link rel="prefetch" href="/TIL/assets/js/38.42c73b33.js"><link rel="prefetch" href="/TIL/assets/js/39.60be3e57.js"><link rel="prefetch" href="/TIL/assets/js/4.26af9a66.js"><link rel="prefetch" href="/TIL/assets/js/40.d103639c.js"><link rel="prefetch" href="/TIL/assets/js/41.72526428.js"><link rel="prefetch" href="/TIL/assets/js/42.5706014a.js"><link rel="prefetch" href="/TIL/assets/js/43.06d7b96b.js"><link rel="prefetch" href="/TIL/assets/js/44.a80b7f87.js"><link rel="prefetch" href="/TIL/assets/js/45.07b2497e.js"><link rel="prefetch" href="/TIL/assets/js/46.d614f062.js"><link rel="prefetch" href="/TIL/assets/js/47.4e0edd8f.js"><link rel="prefetch" href="/TIL/assets/js/48.b66344c1.js"><link rel="prefetch" href="/TIL/assets/js/49.6b461f12.js"><link rel="prefetch" href="/TIL/assets/js/5.0b9fe49a.js"><link rel="prefetch" href="/TIL/assets/js/50.c3a3f07b.js"><link rel="prefetch" href="/TIL/assets/js/51.d8f172f7.js"><link rel="prefetch" href="/TIL/assets/js/52.7d4558a0.js"><link rel="prefetch" href="/TIL/assets/js/53.c34ee21b.js"><link rel="prefetch" href="/TIL/assets/js/54.91083f3f.js"><link rel="prefetch" href="/TIL/assets/js/55.81a91559.js"><link rel="prefetch" href="/TIL/assets/js/56.3632e256.js"><link rel="prefetch" href="/TIL/assets/js/57.cbcb31d8.js"><link rel="prefetch" href="/TIL/assets/js/58.b9b11307.js"><link rel="prefetch" href="/TIL/assets/js/59.342411b9.js"><link rel="prefetch" href="/TIL/assets/js/6.daa0ede0.js"><link rel="prefetch" href="/TIL/assets/js/60.28475050.js"><link rel="prefetch" href="/TIL/assets/js/61.6158afef.js"><link rel="prefetch" href="/TIL/assets/js/62.c02cace5.js"><link rel="prefetch" href="/TIL/assets/js/63.ef4a0fad.js"><link rel="prefetch" href="/TIL/assets/js/64.d0cfa4e2.js"><link rel="prefetch" href="/TIL/assets/js/65.af6a1e58.js"><link rel="prefetch" href="/TIL/assets/js/66.b664c30b.js"><link rel="prefetch" href="/TIL/assets/js/67.8a9a67a4.js"><link rel="prefetch" href="/TIL/assets/js/68.9f64fd79.js"><link rel="prefetch" href="/TIL/assets/js/69.f3be5e14.js"><link rel="prefetch" href="/TIL/assets/js/7.dc70adec.js"><link rel="prefetch" href="/TIL/assets/js/70.3d075be5.js"><link rel="prefetch" href="/TIL/assets/js/71.62025be3.js"><link rel="prefetch" href="/TIL/assets/js/72.bc149efe.js"><link rel="prefetch" href="/TIL/assets/js/73.d3dccbb0.js"><link rel="prefetch" href="/TIL/assets/js/74.dd5f1174.js"><link rel="prefetch" href="/TIL/assets/js/75.50401e00.js"><link rel="prefetch" href="/TIL/assets/js/76.6027a90a.js"><link rel="prefetch" href="/TIL/assets/js/77.e7861358.js"><link rel="prefetch" href="/TIL/assets/js/78.f88cb97a.js"><link rel="prefetch" href="/TIL/assets/js/79.92360d94.js"><link rel="prefetch" href="/TIL/assets/js/8.c5c73bc8.js"><link rel="prefetch" href="/TIL/assets/js/80.e27f7a17.js"><link rel="prefetch" href="/TIL/assets/js/81.5547cc1c.js"><link rel="prefetch" href="/TIL/assets/js/82.736a3bbe.js"><link rel="prefetch" href="/TIL/assets/js/83.36efffba.js"><link rel="prefetch" href="/TIL/assets/js/84.caabd61a.js"><link rel="prefetch" href="/TIL/assets/js/85.899322d9.js"><link rel="prefetch" href="/TIL/assets/js/86.a190b5ea.js"><link rel="prefetch" href="/TIL/assets/js/87.6a4d1ef5.js"><link rel="prefetch" href="/TIL/assets/js/88.c4e69617.js"><link rel="prefetch" href="/TIL/assets/js/89.ab3ae6a6.js"><link rel="prefetch" href="/TIL/assets/js/9.a2e7de2a.js"><link rel="prefetch" href="/TIL/assets/js/90.1271af38.js"><link rel="prefetch" href="/TIL/assets/js/91.748d441a.js"><link rel="prefetch" href="/TIL/assets/js/92.a61f3681.js"><link rel="prefetch" href="/TIL/assets/js/93.ec1bc232.js"><link rel="prefetch" href="/TIL/assets/js/94.2bda217f.js"><link rel="prefetch" href="/TIL/assets/js/95.076766bf.js"><link rel="prefetch" href="/TIL/assets/js/96.91137374.js"><link rel="prefetch" href="/TIL/assets/js/97.6ffb4939.js"><link rel="prefetch" href="/TIL/assets/js/98.45ec8b54.js"><link rel="prefetch" href="/TIL/assets/js/99.5d38b493.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.d32b1f14.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today I Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/iosdevted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://sunggweon.dev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/iosdevted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://sunggweon.dev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Swift / iOS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>RxSwift</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS Development</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Graphics &amp; Animation</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Core Concepts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Architecture Patterns</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/architecture-patterns/singleton.html" class="sidebar-link">Singleton Pattern</a></li><li><a href="/TIL/architecture-patterns/design-pattern.html" aria-current="page" class="active sidebar-link">Design Patterns; Creational, Structural, Behavioral design</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/architecture-patterns/design-pattern.html#design-pattern" class="sidebar-link">Design Pattern</a></li><li class="sidebar-sub-header"><a href="/TIL/architecture-patterns/design-pattern.html#types-of-design-patterns" class="sidebar-link">Types of design patterns</a></li><li class="sidebar-sub-header"><a href="/TIL/architecture-patterns/design-pattern.html#references" class="sidebar-link">References</a></li></ul></li><li><a href="/TIL/architecture-patterns/design-pattern-2.html" class="sidebar-link">Architecture Patterns; MV(X) essentials</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Networking</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SQL &amp; Data</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Unit Test</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CI &amp; CD</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>UI &amp; UX</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Map &amp; Location APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Common Lisp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Université Paris 8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Useful Articles</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="design-patterns-creational-structural-behavioral-design"><a href="#design-patterns-creational-structural-behavioral-design" class="header-anchor">#</a> Design Patterns; Creational, Structural, Behavioral design</h1> <p>As a developer, you might already be familiar with the notion of design patterns in object-oriented programming. They were first authoritatively described and cataloged in Design Patterns: Elements of Reusable Object-Oriented Software, by Erich Gamma, Richard Helm, Ralph Johnson, and John Vlissides (commonly referred to as the “Gang of Four”). That book, originally published in 1994, was soon followed by other books and articles that further explored and elaborated design patterns in object-oriented systems.</p> <h2 id="design-pattern"><a href="#design-pattern" class="header-anchor">#</a> Design Pattern</h2> <blockquote><p>A design pattern is a template for a design that solves a general, recurring problem in a particular context. It is a tool of abstraction that is useful in fields like architecture and engineering as well as software development.</p></blockquote> <p>A design pattern abstracts the key aspects of the structure of a concrete design that has proven to be effective over time. The pattern has a name and identifies the classes and objects that participate in the pattern along with their responsibilities and collaborations. It also spells out consequences (costs and benefits) and the situations in which the pattern can be applied. A design pattern is a kind of template or guide for a particular design; in a sense, a concrete design is an “instantiation” of a pattern. <strong>Design patterns are not absolute</strong>. There is some flexibility in how you can apply them, and often things such as programming language and existing architectures can determine how the pattern is applied.</p> <p>Several themes or principles of design influence design patterns. These design principles are rules of thumb for constructing object-oriented systems, such as “encapsulate the aspects of system structure that vary” and “program to an interface, not an implementation.” They express important insights. For example, if you isolate the parts of a system that vary, and encapsulate them, they can vary independently of other parts of the system, especially if you define interfaces for them that are not tied to implementation specifics. You can later alter or extend those variable parts without affecting the other parts of the system. You thus eliminate dependencies and reduce couplings between parts, and consequently the system becomes more flexible and easier to change.</p> <h2 id="types-of-design-patterns"><a href="#types-of-design-patterns" class="header-anchor">#</a> Types of design patterns</h2> <p>Before i describe the most common architecture patterns in Swift, you should first learn the three types of software design patterns and how they differ:</p> <h3 id="creational"><a href="#creational" class="header-anchor">#</a> Creational</h3> <p>Creational software design patterns deal with object creation mechanisms. They try to instantiate objects in a manner suitable for the particular situation. Here are several creational design patterns:</p> <ul><li><p><strong>Factory Method</strong> - This pattern makes the codebase more flexible to add or remove new types.</p></li> <li><p><strong>Abstract Factory</strong></p></li> <li><p><strong>Builder</strong></p></li> <li><p><strong>Singleton</strong> - The Singleton design pattern ensures a class only has one instance, and provides a global point of access to it.</p></li> <li><p><strong>Prototype</strong></p></li></ul> <h3 id="structural"><a href="#structural" class="header-anchor">#</a> Structural</h3> <p>Structural design patterns aim to simplify the design by finding an easy way of realizing relationships between classes and objects. These are some structural architecture patterns:</p> <ul><li><p><strong>Adapter</strong> - This pattern converts the interface of a class into another interface that clients expect. Adapter lets classes work together that couldn’t otherwise because of incompatible interfaces. It decouples the client from the class of the targeted object.</p></li> <li><p><strong>Bridge</strong></p></li> <li><p><strong>Facade</strong> - This pattern provides a single interface to a complex subsystem. Instead of exposing the user to a set of classes and their APIs, you only expose one simple unified API.</p></li> <li><p><strong>Decorator</strong> - This pattern dynamically adds behaviors and responsibilities to an object without modifying its code. It’s an alternative to subclassing where you modify a class’s behavior by wrapping it with another object.</p></li> <li><p><strong>Composite</strong> - This pattern composes related objects into tree structures to represent part-whole hierarchies.</p></li> <li><p><strong>Flyweight</strong></p></li> <li><p><strong>Proxy</strong> - This pattern provides a surrogate, or placeholder, for another object in order to control access them. This pattern is structurally similar to the Decorator pattern but it serves a different purpose; Decorator adds behavior to an object whereas Proxy controls access to an object.</p></li></ul> <h3 id="behavioral"><a href="#behavioral" class="header-anchor">#</a> Behavioral</h3> <p>Behavioral design patterns identify common communication patterns between entities and implement these patterns. Behavioral design patterns include:</p> <ul><li><p><strong>Chain of Responsibility</strong></p></li> <li><p><strong>Template Method</strong> - This pattern defines the skeleton of an algorithm in an operation, deferring some steps to subclasses.</p></li> <li><p><strong>Command</strong> - This pattern encapsulates a request as an object, thereby letting you parameterize clients with different requests, queue or log requests, and support undoable operations.</p></li> <li><p><strong>Iterator</strong> - This pattern provides a way to access the elements of an aggregate object (that is, a collection) sequentially without exposing its underlying representation.</p></li> <li><p><strong>Mediator</strong> - This pattern defines an object that encapsulates how a set of objects interact. Mediator promotes loose coupling by keeping objects from referring to each other explicitly, and it lets you vary their interaction independently.</p></li> <li><p><strong>Memento</strong> - In this pattern saves your stuff somewhere. Later on, this externalized state can be restored without violating encapsulation; that is, private data remains private.</p></li> <li><p><strong>Observer</strong> - This pattern defines a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically.</p></li> <li><p><strong>Strategy</strong> - This pattern allows you to change the behaviour of an algorithm at run time. Using interfaces, we are able to define a family of algorithms, encapsulate each one, and make them interchangeable, allowing us to select which algorithm to execute at run time.</p></li> <li><p><strong>State</strong></p></li> <li><p><strong>Visitor</strong></p></li></ul> <h1 id="most-frequently-used-design-patterns-in-swift"><a href="#most-frequently-used-design-patterns-in-swift" class="header-anchor">#</a> Most frequently used design patterns in Swift</h1> <p>I'm going to provide only the essential information about each software design pattern – namely, how it works from the technical point of view and when it should be applied. We’ll also give an illustrative example in the Swift programming language.</p> <h3 id="builder"><a href="#builder" class="header-anchor">#</a> Builder</h3> <blockquote><p>The Builder pattern is a creational design pattern that allows you to create complex objects from simple objects step by step. This design pattern helps you use the same code for creating different object views.</p></blockquote> <p>The Builder design pattern calls for separating the construction of an object from its own class. The construction of this object is instead assigned to special objects called builders and split into multiple steps. To create an object, you successively call builder methods. And you don’t need to go through all the steps – only those required for creating an object with a particular configuration.</p> <p><strong>You should apply the Builder design pattern</strong></p> <ul><li><p>When you want to avoid using a telescopic constructor (when a constructor has too many parameters, it gets difficult to read and manage)</p></li> <li><p>When your code needs to create different views of a specific object.</p></li> <li><p>When you need to compose complex objects.</p></li></ul> <p><strong>Example</strong></p> <p>Suppose you’re developing an iOS application for a restaurant and you need to implement ordering functionality. You can introduce two structures, Dish and Order, and with the help of the OrderBuilder object, you can compose orders with different sets of dishes.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token comment">// Design Patterns: Builder</span>
<span class="token keyword">import</span> <span class="token builtin">Foundation</span>

<span class="token comment">// Models</span>
<span class="token keyword">enum</span> <span class="token builtin">DishCategory</span><span class="token punctuation">:</span> <span class="token builtin">Int</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> firstCourses<span class="token punctuation">,</span> mainCourses<span class="token punctuation">,</span> garnishes<span class="token punctuation">,</span> drinks
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">Dish</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token builtin">String</span>
    <span class="token keyword">var</span> price<span class="token punctuation">:</span> <span class="token builtin">Float</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">OrderItem</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dish<span class="token punctuation">:</span> <span class="token builtin">Dish</span>
    <span class="token keyword">var</span> <span class="token builtin">count</span><span class="token punctuation">:</span> <span class="token builtin">Int</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">Order</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> firstCourses<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">OrderItem</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">var</span> mainCourses<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">OrderItem</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">var</span> garnishes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">OrderItem</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">var</span> drinks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">OrderItem</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
    <span class="token keyword">var</span> price<span class="token punctuation">:</span> <span class="token builtin">Float</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> items <span class="token operator">=</span> firstCourses <span class="token operator">+</span> mainCourses <span class="token operator">+</span> garnishes <span class="token operator">+</span> drinks
        <span class="token keyword">return</span> items<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token function">Float</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> $<span class="token number">0</span> <span class="token operator">+</span> $<span class="token number">1</span><span class="token punctuation">.</span>dish<span class="token punctuation">.</span>price <span class="token operator">*</span> <span class="token function">Float</span><span class="token punctuation">(</span>$<span class="token number">1</span><span class="token punctuation">.</span><span class="token builtin">count</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Builder</span>
<span class="token keyword">class</span> <span class="token class-name">OrderBuilder</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> order<span class="token punctuation">:</span> <span class="token builtin">Order</span><span class="token operator">?</span>
    
    <span class="token keyword">func</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        order <span class="token operator">=</span> <span class="token function">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">setFirstCourse</span><span class="token punctuation">(</span><span class="token number">_</span> dish<span class="token punctuation">:</span> <span class="token builtin">Dish</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>dish<span class="token punctuation">,</span> at<span class="token punctuation">:</span> order<span class="token operator">?</span><span class="token punctuation">.</span>firstCourses<span class="token punctuation">,</span> withCategory<span class="token punctuation">:</span> <span class="token punctuation">.</span>firstCourses<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">setMainCourse</span><span class="token punctuation">(</span><span class="token number">_</span> dish<span class="token punctuation">:</span> <span class="token builtin">Dish</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>dish<span class="token punctuation">,</span> at<span class="token punctuation">:</span> order<span class="token operator">?</span><span class="token punctuation">.</span>mainCourses<span class="token punctuation">,</span> withCategory<span class="token punctuation">:</span> <span class="token punctuation">.</span>mainCourses<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">setGarnish</span><span class="token punctuation">(</span><span class="token number">_</span> dish<span class="token punctuation">:</span> <span class="token builtin">Dish</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>dish<span class="token punctuation">,</span> at<span class="token punctuation">:</span> order<span class="token operator">?</span><span class="token punctuation">.</span>garnishes<span class="token punctuation">,</span> withCategory<span class="token punctuation">:</span> <span class="token punctuation">.</span>garnishes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">setDrink</span><span class="token punctuation">(</span><span class="token number">_</span> dish<span class="token punctuation">:</span> <span class="token builtin">Dish</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>dish<span class="token punctuation">,</span> at<span class="token punctuation">:</span> order<span class="token operator">?</span><span class="token punctuation">.</span>drinks<span class="token punctuation">,</span> withCategory<span class="token punctuation">:</span> <span class="token punctuation">.</span>drinks<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Order</span><span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> order <span class="token operator">?</span><span class="token operator">?</span> <span class="token constant">nil</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">_</span> dish<span class="token punctuation">:</span> <span class="token builtin">Dish</span><span class="token punctuation">,</span> at orderCategory<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">OrderItem</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">,</span> withCategory dishCategory<span class="token punctuation">:</span> <span class="token builtin">DishCategory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">guard</span> <span class="token keyword">let</span> orderCategory <span class="token operator">=</span> orderCategory <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">var</span> item<span class="token punctuation">:</span> <span class="token builtin">OrderItem</span><span class="token operator">!</span> <span class="token operator">=</span> orderCategory<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> $<span class="token number">0</span><span class="token punctuation">.</span>dish<span class="token punctuation">.</span>name <span class="token operator">==</span> dish<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">first</span>
        
        <span class="token keyword">guard</span> item <span class="token operator">==</span> <span class="token constant">nil</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            item<span class="token punctuation">.</span><span class="token builtin">count</span> <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        
        item <span class="token operator">=</span> <span class="token function">OrderItem</span><span class="token punctuation">(</span>dish<span class="token punctuation">:</span> dish<span class="token punctuation">,</span> <span class="token builtin">count</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span>
        
        <span class="token keyword">switch</span> dishCategory <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token punctuation">.</span>firstCourses<span class="token punctuation">:</span>
            order<span class="token operator">?</span><span class="token punctuation">.</span>firstCourses<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token punctuation">.</span>mainCourses<span class="token punctuation">:</span>
            order<span class="token operator">?</span><span class="token punctuation">.</span>mainCourses<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token punctuation">.</span>garnishes<span class="token punctuation">:</span>
            order<span class="token operator">?</span><span class="token punctuation">.</span>garnishes<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token punctuation">.</span>drinks<span class="token punctuation">:</span>
            order<span class="token operator">?</span><span class="token punctuation">.</span>drinks<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage</span>
<span class="token keyword">let</span> steak <span class="token operator">=</span> <span class="token function">Dish</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&quot;Steak&quot;</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token number">2.30</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> chips <span class="token operator">=</span> <span class="token function">Dish</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&quot;Chips&quot;</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token number">1.20</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> coffee <span class="token operator">=</span> <span class="token function">Dish</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&quot;Coffee&quot;</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token number">0.80</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> builder <span class="token operator">=</span> <span class="token function">OrderBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
builder<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
builder<span class="token punctuation">.</span><span class="token function">setMainCourse</span><span class="token punctuation">(</span>steak<span class="token punctuation">)</span>
builder<span class="token punctuation">.</span><span class="token function">setGarnish</span><span class="token punctuation">(</span>chips<span class="token punctuation">)</span>
builder<span class="token punctuation">.</span><span class="token function">setDrink</span><span class="token punctuation">(</span>coffee<span class="token punctuation">)</span>

<span class="token keyword">let</span> order <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
order<span class="token operator">?</span><span class="token punctuation">.</span>price

<span class="token comment">// Result:</span>
<span class="token comment">// 4.30</span>
</code></pre></div><h3 id="adapter"><a href="#adapter" class="header-anchor">#</a> Adapter</h3> <blockquote><p>Adapter is a structural design pattern that allows objects with incompatible interfaces to work together. In other words, it transforms the interface of an object to adapt it to a different object.</p></blockquote> <p>An adapter wraps an object, therefore concealing it completely from another object. For example, you could wrap an object that handles meters with an adapter that converts data into feet.</p> <p><strong>You should apply the Adapter design pattern</strong></p> <ul><li><p>when you want to use a third-party class but its interface doesn’t match the rest of your application’s code.</p></li> <li><p>when you need to use several existing subclasses but they lack particular functionality and, on top of that, you can’t extend the superclass.</p></li></ul> <p><strong>Example</strong></p> <p>Suppose you want to implement a calendar and event management functionality in your iOS application. To do this, you should integrate the EventKit framework and adapt the Event model from the framework to the model in your application. An Adapter can wrap the model of the framework and make it compatible with the model in your application.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token comment">// Design Patterns: Adapter</span>
<span class="token keyword">import</span> <span class="token builtin">EventKit</span>

<span class="token comment">// Models</span>
<span class="token keyword">protocol</span> <span class="token builtin">Event</span><span class="token punctuation">:</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> title<span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span>
    <span class="token keyword">var</span> startDate<span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span>
    <span class="token keyword">var</span> endDate<span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">extension</span> <span class="token builtin">Event</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> description<span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Name: <span class="token interpolation"><span class="token delimiter variable">\(</span>title<span class="token delimiter variable">)</span></span>\nEvent start: <span class="token interpolation"><span class="token delimiter variable">\(</span>startDate<span class="token delimiter variable">)</span></span>\nEvent end: <span class="token interpolation"><span class="token delimiter variable">\(</span>endDate<span class="token delimiter variable">)</span></span>&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">LocalEvent</span><span class="token punctuation">:</span> <span class="token builtin">Event</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> title<span class="token punctuation">:</span> <span class="token builtin">String</span>
    <span class="token keyword">var</span> startDate<span class="token punctuation">:</span> <span class="token builtin">String</span>
    <span class="token keyword">var</span> endDate<span class="token punctuation">:</span> <span class="token builtin">String</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> startDate<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> endDate<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title
        <span class="token keyword">self</span><span class="token punctuation">.</span>startDate <span class="token operator">=</span> startDate
        <span class="token keyword">self</span><span class="token punctuation">.</span>endDate <span class="token operator">=</span> endDate
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Adapter</span>
<span class="token keyword">class</span> <span class="token class-name">EKEventAdapter</span><span class="token punctuation">:</span> <span class="token builtin">Event</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> event<span class="token punctuation">:</span> <span class="token builtin">EKEvent</span>
    
    <span class="token keyword">private</span> <span class="token keyword">lazy</span> <span class="token keyword">var</span> dateFormatter<span class="token punctuation">:</span> <span class="token builtin">DateFormatter</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> dateFormatter <span class="token operator">=</span> <span class="token function">DateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        dateFormatter<span class="token punctuation">.</span>dateFormat <span class="token operator">=</span> <span class="token string">&quot;MM-dd-yyyy HH:mm&quot;</span>
        <span class="token keyword">return</span> dateFormatter
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">var</span> title<span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> event<span class="token punctuation">.</span>title
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> startDate<span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dateFormatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> event<span class="token punctuation">.</span>startDate<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> endDate<span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dateFormatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> event<span class="token punctuation">.</span>endDate<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>event<span class="token punctuation">:</span> <span class="token builtin">EKEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>event <span class="token operator">=</span> event
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage</span>
<span class="token keyword">let</span> dateFormatter <span class="token operator">=</span> <span class="token function">DateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
dateFormatter<span class="token punctuation">.</span>dateFormat <span class="token operator">=</span> <span class="token string">&quot;MM/dd/yyyy HH:mm&quot;</span>

<span class="token keyword">let</span> eventStore <span class="token operator">=</span> <span class="token function">EKEventStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token function">EKEvent</span><span class="token punctuation">(</span>eventStore<span class="token punctuation">:</span> eventStore<span class="token punctuation">)</span>
event<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&quot;Design Pattern Meetup&quot;</span>
event<span class="token punctuation">.</span>startDate <span class="token operator">=</span> dateFormatter<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string">&quot;06/29/2018 18:00&quot;</span><span class="token punctuation">)</span>
event<span class="token punctuation">.</span>endDate <span class="token operator">=</span> dateFormatter<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string">&quot;06/29/2018 19:30&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> adapter <span class="token operator">=</span> <span class="token function">EKEventAdapter</span><span class="token punctuation">(</span>event<span class="token punctuation">:</span> event<span class="token punctuation">)</span>
adapter<span class="token punctuation">.</span>description
</code></pre></div><h3 id="decorator"><a href="#decorator" class="header-anchor">#</a> Decorator</h3> <blockquote><p>The Decorator pattern is a structural design pattern that allows you to dynamically attach new functionalities to an object by wrapping them in useful wrappers.</p></blockquote> <p>No wonder this design pattern is also called the Wrapper design pattern. This name describes more precisely the core idea behind this pattern: you place a target object inside another wrapper object that triggers the basic behavior of the target object and adds its own behavior to the result.</p> <p><strong>You should apply the Decorator design pattern</strong></p> <ul><li><p>when you want to add responsibilities to objects dynamically and conceal those objects from the code that uses them.</p></li> <li><p>when it’s impossible to extend responsibilities of an object through inheritance.</p></li></ul> <p><strong>Example</strong></p> <p>Imagine you need to implement data management in your iOS application. You could create two decorators: EncryptionDecorator for encrypting and decrypting data and EncodingDecorator for encoding and decoding.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token comment">// Design Patterns: Decorator</span>
<span class="token keyword">import</span> <span class="token builtin">Foundation</span>

<span class="token comment">// Helpers (may be not include in blog post)</span>
<span class="token keyword">func</span> <span class="token function">encryptString</span><span class="token punctuation">(</span><span class="token number">_</span> string<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> with encryptionKey<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">String</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> stringBytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">UInt8</span><span class="token punctuation">]</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span>utf8<span class="token punctuation">)</span>
    <span class="token keyword">let</span> keyBytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">UInt8</span><span class="token punctuation">]</span><span class="token punctuation">(</span>encryptionKey<span class="token punctuation">.</span>utf8<span class="token punctuation">)</span>
    <span class="token keyword">var</span> encryptedBytes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">UInt8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> stringByte <span class="token keyword">in</span> stringBytes<span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        encryptedBytes<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>stringByte<span class="token punctuation">.</span>element <span class="token operator">^</span> keyBytes<span class="token punctuation">[</span>stringByte<span class="token punctuation">.</span>offset <span class="token operator">%</span> encryptionKey<span class="token punctuation">.</span><span class="token builtin">count</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">:</span> encryptedBytes<span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">decryptString</span><span class="token punctuation">(</span><span class="token number">_</span> string<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> with encryptionKey<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">String</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> stringBytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">UInt8</span><span class="token punctuation">]</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span>utf8<span class="token punctuation">)</span>
    <span class="token keyword">let</span> keyBytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">UInt8</span><span class="token punctuation">]</span><span class="token punctuation">(</span>encryptionKey<span class="token punctuation">.</span>utf8<span class="token punctuation">)</span>
    <span class="token keyword">var</span> decryptedBytes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">UInt8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    
    <span class="token keyword">for</span> stringByte <span class="token keyword">in</span> stringBytes<span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        decryptedBytes<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>stringByte<span class="token punctuation">.</span>element <span class="token operator">^</span> keyBytes<span class="token punctuation">[</span>stringByte<span class="token punctuation">.</span>offset <span class="token operator">%</span> encryptionKey<span class="token punctuation">.</span><span class="token builtin">count</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">:</span> decryptedBytes<span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment">// Services</span>
<span class="token keyword">protocol</span> <span class="token builtin">DataSource</span><span class="token punctuation">:</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function">writeData</span><span class="token punctuation">(</span><span class="token number">_</span> data<span class="token punctuation">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span>
    <span class="token keyword">func</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Any</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">UserDefaultsDataSource</span><span class="token punctuation">:</span> <span class="token builtin">DataSource</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> userDefaultsKey<span class="token punctuation">:</span> <span class="token builtin">String</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>userDefaultsKey<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>userDefaultsKey <span class="token operator">=</span> userDefaultsKey
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">writeData</span><span class="token punctuation">(</span><span class="token number">_</span> data<span class="token punctuation">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">UserDefaults</span><span class="token punctuation">.</span>standard<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> forKey<span class="token punctuation">:</span> userDefaultsKey<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Any</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token builtin">UserDefaults</span><span class="token punctuation">.</span>standard<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>forKey<span class="token punctuation">:</span> userDefaultsKey<span class="token punctuation">)</span><span class="token operator">!</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Decorators</span>
<span class="token keyword">class</span> <span class="token class-name">DataSourceDecorator</span><span class="token punctuation">:</span> <span class="token builtin">DataSource</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> wrappee<span class="token punctuation">:</span> <span class="token builtin">DataSource</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>wrappee<span class="token punctuation">:</span> <span class="token builtin">DataSource</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>wrappee <span class="token operator">=</span> wrappee
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">writeData</span><span class="token punctuation">(</span><span class="token number">_</span> data<span class="token punctuation">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        wrappee<span class="token punctuation">.</span><span class="token function">writeData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Any</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> wrappee<span class="token punctuation">.</span><span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">EncodingDecorator</span><span class="token punctuation">:</span> <span class="token builtin">DataSourceDecorator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> encoding<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">.</span><span class="token builtin">Encoding</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>wrappee<span class="token punctuation">:</span> <span class="token builtin">DataSource</span><span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">.</span><span class="token builtin">Encoding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>encoding <span class="token operator">=</span> encoding
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>wrappee<span class="token punctuation">:</span> wrappee<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">writeData</span><span class="token punctuation">(</span><span class="token number">_</span> data<span class="token punctuation">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> stringData <span class="token operator">=</span> <span class="token punctuation">(</span>data <span class="token keyword">as</span><span class="token operator">!</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>using<span class="token punctuation">:</span> encoding<span class="token punctuation">)</span><span class="token operator">!</span>
        wrappee<span class="token punctuation">.</span><span class="token function">writeData</span><span class="token punctuation">(</span>stringData<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Any</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> wrappee<span class="token punctuation">.</span><span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span><span class="token operator">!</span> <span class="token builtin">Data</span>
        <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> data<span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> encoding<span class="token punctuation">)</span><span class="token operator">!</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">EncryptionDecorator</span><span class="token punctuation">:</span> <span class="token builtin">DataSourceDecorator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> encryptionKey<span class="token punctuation">:</span> <span class="token builtin">String</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>wrappee<span class="token punctuation">:</span> <span class="token builtin">DataSource</span><span class="token punctuation">,</span> encryptionKey<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>encryptionKey <span class="token operator">=</span> encryptionKey
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>wrappee<span class="token punctuation">:</span> wrappee<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">writeData</span><span class="token punctuation">(</span><span class="token number">_</span> data<span class="token punctuation">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> encryptedString <span class="token operator">=</span> <span class="token function">encryptString</span><span class="token punctuation">(</span>data <span class="token keyword">as</span><span class="token operator">!</span> <span class="token builtin">String</span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> encryptionKey<span class="token punctuation">)</span>
        wrappee<span class="token punctuation">.</span><span class="token function">writeData</span><span class="token punctuation">(</span>encryptedString<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Any</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> encryptedString <span class="token operator">=</span> wrappee<span class="token punctuation">.</span><span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span><span class="token operator">!</span> <span class="token builtin">String</span>
        <span class="token keyword">return</span> <span class="token function">decryptString</span><span class="token punctuation">(</span>encryptedString<span class="token punctuation">,</span> with<span class="token punctuation">:</span> encryptionKey<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage</span>
<span class="token keyword">var</span> source<span class="token punctuation">:</span> <span class="token builtin">DataSource</span> <span class="token operator">=</span> <span class="token function">UserDefaultsDataSource</span><span class="token punctuation">(</span>userDefaultsKey<span class="token punctuation">:</span> <span class="token string">&quot;decorator&quot;</span><span class="token punctuation">)</span>
source <span class="token operator">=</span> <span class="token function">EncodingDecorator</span><span class="token punctuation">(</span>wrappee<span class="token punctuation">:</span> source<span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span>
source <span class="token operator">=</span> <span class="token function">EncryptionDecorator</span><span class="token punctuation">(</span>wrappee<span class="token punctuation">:</span> source<span class="token punctuation">,</span> encryptionKey<span class="token punctuation">:</span> <span class="token string">&quot;secret&quot;</span><span class="token punctuation">)</span>
source<span class="token punctuation">.</span><span class="token function">writeData</span><span class="token punctuation">(</span><span class="token string">&quot;Design Patterns&quot;</span><span class="token punctuation">)</span>
source<span class="token punctuation">.</span><span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span><span class="token operator">!</span> <span class="token builtin">String</span>
</code></pre></div><h3 id="facade"><a href="#facade" class="header-anchor">#</a> Facade</h3> <blockquote><p>The Facade pattern is a structural design pattern that provides a simple interface to a library, framework, or complex system of classes.</p></blockquote> <p>Imagine that your code has to deal with multiple objects of a complex library or framework. You need to initialize all these objects, keep track of the right order of dependencies, and so on. As a result, the business logic of your classes gets intertwined with implementation details of other classes. Such code is difficult to read and maintain.</p> <p>The Facade pattern provides a simple interface for working with complex subsystems containing lots of classes. The Facade pattern offers a simplified interface with limited functionality that you can extend by using a complex subsystem directly. This simplified interface provides only the features a client needs while concealing all others.</p> <p><strong>You should apply the Facade design pattern</strong></p> <ul><li><p>when you want to provide a simple or unified interface to a complex subsystem.</p></li> <li><p>when you need to decompose a subsystem into separate layers.</p></li></ul> <p><strong>Example</strong></p> <p>Lots of modern mobile applications support audio recording and playback, so let’s suppose you need to implement this functionality. You could use the Facade pattern to hide the implementation of services responsible for the file system (<strong>FileService</strong>), audio sessions (<strong>AudioSessionService</strong>), audio recording (<strong>RecorderService</strong>), and audio playback (<strong>PlayerService</strong>). The Facade provides a simplified interface for this rather complex system of classes.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token comment">// Design Patterns: Facade</span>
<span class="token keyword">import</span> <span class="token builtin">AVFoundation</span>

<span class="token comment">// Services (may be not include in blog post)</span>
<span class="token keyword">struct</span> <span class="token builtin">FileService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> documentDirectory<span class="token punctuation">:</span> <span class="token constant">URL</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token builtin">FileManager</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">urls</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">.</span>documentDirectory<span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token punctuation">.</span>userDomainMask<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">first</span><span class="token operator">!</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">var</span> contentsOfDocumentDirectory<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token constant">URL</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">try</span><span class="token operator">!</span> <span class="token builtin">FileManager</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">contentsOfDirectory</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> documentDirectory<span class="token punctuation">,</span> includingPropertiesForKeys<span class="token punctuation">:</span> <span class="token constant">nil</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">path</span><span class="token punctuation">(</span>withPathComponent component<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token constant">URL</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> documentDirectory<span class="token punctuation">.</span><span class="token function">appendingPathComponent</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">removeItem</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> url <span class="token operator">=</span> contentsOfDocumentDirectory<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
        <span class="token keyword">try</span><span class="token operator">!</span> <span class="token builtin">FileManager</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> url<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">protocol</span> <span class="token builtin">AudioSessionServiceDelegate</span><span class="token punctuation">:</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function">audioSessionService</span><span class="token punctuation">(</span><span class="token number">_</span> audioSessionService<span class="token punctuation">:</span> <span class="token builtin">AudioSessionService</span><span class="token punctuation">,</span> recordPermissionDidAllow allowed<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AudioSessionService</span> <span class="token punctuation">{</span>
    <span class="token keyword">weak</span> <span class="token keyword">var</span> delegate<span class="token punctuation">:</span> <span class="token builtin">AudioSessionServiceDelegate</span><span class="token operator">?</span>
    
    <span class="token keyword">func</span> <span class="token function">setupSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token operator">!</span> <span class="token builtin">AVAudioSession</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCategory</span><span class="token punctuation">(</span><span class="token builtin">AVAudioSessionCategoryPlayAndRecord</span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span>defaultToSpeaker<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">try</span><span class="token operator">!</span> <span class="token builtin">AVAudioSession</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        
        <span class="token builtin">AVAudioSession</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>requestRecordPermission <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> allowed <span class="token keyword">in</span>
            <span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span>async <span class="token punctuation">{</span>
                <span class="token keyword">guard</span> <span class="token keyword">let</span> strongSelf <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">,</span> <span class="token keyword">let</span> delegate <span class="token operator">=</span> strongSelf<span class="token punctuation">.</span>delegate <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span>
                <span class="token punctuation">}</span>
                
                delegate<span class="token punctuation">.</span><span class="token function">audioSessionService</span><span class="token punctuation">(</span>strongSelf<span class="token punctuation">,</span> recordPermissionDidAllow<span class="token punctuation">:</span> allowed<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">deactivateSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token operator">!</span> <span class="token builtin">AVAudioSession</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setActive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">RecorderService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> isRecording <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> recorder<span class="token punctuation">:</span> <span class="token builtin">AVAudioRecorder</span><span class="token operator">!</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> url<span class="token punctuation">:</span> <span class="token constant">URL</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> <span class="token constant">URL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>url <span class="token operator">=</span> url
    <span class="token punctuation">}</span>
    
    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function">startRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">guard</span> <span class="token operator">!</span>isRecording <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        
        isRecording <span class="token operator">=</span> <span class="token operator">!</span>isRecording
        recorder <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">!</span> <span class="token function">AVAudioRecorder</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> url<span class="token punctuation">,</span> settings<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">AVFormatIDKey</span><span class="token punctuation">:</span> kAudioFormatMPEG4AAC<span class="token punctuation">]</span><span class="token punctuation">)</span>
        recorder<span class="token punctuation">.</span><span class="token function">record</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function">stopRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">guard</span> isRecording <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        
        isRecording <span class="token operator">=</span> <span class="token operator">!</span>isRecording
        recorder<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">protocol</span> <span class="token builtin">PlayerServiceDelegate</span><span class="token punctuation">:</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function">playerService</span><span class="token punctuation">(</span><span class="token number">_</span> playerService<span class="token punctuation">:</span> <span class="token builtin">PlayerService</span><span class="token punctuation">,</span> playingDidFinish success<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">PlayerService</span><span class="token punctuation">:</span> <span class="token builtin">NSObject</span><span class="token punctuation">,</span> <span class="token builtin">AVAudioPlayerDelegate</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> player<span class="token punctuation">:</span> <span class="token builtin">AVAudioPlayer</span><span class="token operator">!</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> url<span class="token punctuation">:</span> <span class="token constant">URL</span>
    <span class="token keyword">weak</span> <span class="token keyword">var</span> delegate<span class="token punctuation">:</span> <span class="token builtin">PlayerServiceDelegate</span><span class="token operator">?</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> <span class="token constant">URL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>url <span class="token operator">=</span> url
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        player <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">!</span> <span class="token function">AVAudioPlayer</span><span class="token punctuation">(</span>contentsOf<span class="token punctuation">:</span> url<span class="token punctuation">)</span>
        player<span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span>
        player<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">stopPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        player<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">audioPlayerDidFinishPlaying</span><span class="token punctuation">(</span><span class="token number">_</span> player<span class="token punctuation">:</span> <span class="token builtin">AVAudioPlayer</span><span class="token punctuation">,</span> successfully flag<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        delegate<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">playerService</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> playingDidFinish<span class="token punctuation">:</span> flag<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Facade</span>
<span class="token keyword">protocol</span> <span class="token builtin">AudioFacadeDelegate</span><span class="token punctuation">:</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function">audioFacadePlayingDidFinish</span><span class="token punctuation">(</span><span class="token number">_</span> audioFacade<span class="token punctuation">:</span> <span class="token builtin">AudioFacade</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AudioFacade</span><span class="token punctuation">:</span> <span class="token builtin">PlayerServiceDelegate</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> audioSessionService <span class="token operator">=</span> <span class="token function">AudioSessionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> fileService <span class="token operator">=</span> <span class="token function">FileService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> fileFormat <span class="token operator">=</span> <span class="token string">&quot;.m4a&quot;</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> playerService<span class="token punctuation">:</span> <span class="token builtin">PlayerService</span><span class="token operator">!</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> recorderService<span class="token punctuation">:</span> <span class="token builtin">RecorderService</span><span class="token operator">!</span>
    <span class="token keyword">weak</span> <span class="token keyword">var</span> delegate<span class="token punctuation">:</span> <span class="token builtin">AudioFacadeDelegate</span><span class="token operator">?</span>
    
    <span class="token keyword">private</span> <span class="token keyword">lazy</span> <span class="token keyword">var</span> dateFormatter<span class="token punctuation">:</span> <span class="token builtin">DateFormatter</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> dateFormatter <span class="token operator">=</span> <span class="token function">DateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        dateFormatter<span class="token punctuation">.</span>dateFormat <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd_HH:mm:ss&quot;</span>
        <span class="token keyword">return</span> dateFormatter
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        audioSessionService<span class="token punctuation">.</span><span class="token function">setupSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">deinit</span> <span class="token punctuation">{</span>
        audioSessionService<span class="token punctuation">.</span><span class="token function">deactivateSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">startRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> fileName <span class="token operator">=</span> dateFormatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appending</span><span class="token punctuation">(</span>fileFormat<span class="token punctuation">)</span>
        <span class="token keyword">let</span> url <span class="token operator">=</span> fileService<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span>withPathComponent<span class="token punctuation">:</span> fileName<span class="token punctuation">)</span>
        recorderService <span class="token operator">=</span> <span class="token function">RecorderService</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> url<span class="token punctuation">)</span>
        recorderService<span class="token punctuation">.</span><span class="token function">startRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">stopRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        recorderService<span class="token punctuation">.</span><span class="token function">stopRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">numberOfRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Int</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fileService<span class="token punctuation">.</span>contentsOfDocumentDirectory<span class="token punctuation">.</span><span class="token builtin">count</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">nameOfRecord</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">String</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> url <span class="token operator">=</span> fileService<span class="token punctuation">.</span>contentsOfDocumentDirectory<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
        <span class="token keyword">return</span> url<span class="token punctuation">.</span>lastPathComponent
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">removeRecord</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fileService<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> index<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">playRecord</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> url <span class="token operator">=</span> fileService<span class="token punctuation">.</span>contentsOfDocumentDirectory<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
        playerService <span class="token operator">=</span> <span class="token function">PlayerService</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> url<span class="token punctuation">)</span>
        playerService<span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span>
        playerService<span class="token punctuation">.</span><span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">stopPlayRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        playerService<span class="token punctuation">.</span><span class="token function">stopPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">playerService</span><span class="token punctuation">(</span><span class="token number">_</span> playerService<span class="token punctuation">:</span> <span class="token builtin">PlayerService</span><span class="token punctuation">,</span> playingDidFinish success<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> success <span class="token punctuation">{</span>
            delegate<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">audioFacadePlayingDidFinish</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage</span>
<span class="token keyword">let</span> audioFacade <span class="token operator">=</span> <span class="token function">AudioFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
audioFacade<span class="token punctuation">.</span><span class="token function">numberOfRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Result:</span>
<span class="token comment">// 0</span>
</code></pre></div><h3 id="template-method"><a href="#template-method" class="header-anchor">#</a> Template Method</h3> <blockquote><p>The Template Method pattern is a behavioral design pattern that defines a skeleton for an algorithm and delegates responsibility for some steps to subclasses. This pattern allows subclasses to redefine certain steps of an algorithm without changing its overall structure.</p></blockquote> <p>This design pattern splits an algorithm into a sequence of steps, describes these steps in separate methods, and calls them consecutively with the help of a single template method.</p> <p><strong>You should apply the Template Method design pattern</strong></p> <ul><li><p>when subclasses need to extend a basic algorithm without modifying its structure.</p></li> <li><p>when you have several classes responsible for quite similar actions (meaning that whenever you modify one class, you need to change the other classes).</p></li></ul> <p><strong>Example</strong></p> <p>Suppose you’re working on an iOS app that must be able to take and save pictures. Therefore, your application needs to get permissions to use the iPhone (or iPad) camera and image gallery. To do this, you can use the <strong>PermissionService</strong> base class that has a specific algorithm. To get permission to use the camera and gallery, you can create two subclasses, <strong>CameraPermissionService</strong> and <strong>PhotoPermissionService</strong>, that redefine certain steps of the algorithm while keeping other steps the same.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token comment">// Design Patterns: Template Method</span>
<span class="token keyword">import</span> <span class="token builtin">AVFoundation</span>
<span class="token keyword">import</span> <span class="token builtin">Photos</span>

<span class="token comment">// Services</span>
<span class="token keyword">typealias</span> <span class="token builtin">AuthorizationCompletion</span> <span class="token operator">=</span> <span class="token punctuation">(</span>status<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">PermissionService</span><span class="token punctuation">:</span> <span class="token builtin">NSObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> message<span class="token punctuation">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
    
    <span class="token keyword">func</span> <span class="token function">authorize</span><span class="token punctuation">(</span><span class="token number">_</span> completion<span class="token punctuation">:</span> @escaping <span class="token punctuation">(</span><span class="token builtin">AuthorizationCompletion</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> status <span class="token operator">=</span> <span class="token function">checkStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">guard</span> <span class="token operator">!</span>status <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">complete</span><span class="token punctuation">(</span>with<span class="token punctuation">:</span> status<span class="token punctuation">,</span> completion<span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        
        requestAuthorization <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> status <span class="token keyword">in</span>
            <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span>with<span class="token punctuation">:</span> status<span class="token punctuation">,</span> completion<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">checkStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">requestAuthorization</span><span class="token punctuation">(</span><span class="token number">_</span> completion<span class="token punctuation">:</span> @escaping <span class="token punctuation">(</span><span class="token builtin">Bool</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">completion</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">formMessage</span><span class="token punctuation">(</span>with status<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> messagePrefix <span class="token operator">=</span> status <span class="token operator">?</span> <span class="token string">&quot;You have access to &quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;You haven't access to &quot;</span>
        <span class="token keyword">let</span> nameOfCurrentPermissionService <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>describing<span class="token punctuation">:</span> <span class="token function">type</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> nameOfBasePermissionService <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>describing<span class="token punctuation">:</span> <span class="token function">type</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token builtin">PermissionService</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> messageSuffix <span class="token operator">=</span> nameOfCurrentPermissionService<span class="token punctuation">.</span><span class="token function">components</span><span class="token punctuation">(</span>separatedBy<span class="token punctuation">:</span> nameOfBasePermissionService<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">first</span><span class="token operator">!</span>
        message <span class="token operator">=</span> messagePrefix <span class="token operator">+</span> messageSuffix
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function">complete</span><span class="token punctuation">(</span>with status<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">,</span> <span class="token number">_</span> completion<span class="token punctuation">:</span> @escaping <span class="token punctuation">(</span><span class="token builtin">AuthorizationCompletion</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">formMessage</span><span class="token punctuation">(</span>with<span class="token punctuation">:</span> status<span class="token punctuation">)</span>
        
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">(</span>status<span class="token punctuation">:</span> status<span class="token punctuation">,</span> message<span class="token punctuation">:</span> message<span class="token punctuation">)</span>
        <span class="token function">completion</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CameraPermissionService</span><span class="token punctuation">:</span> <span class="token builtin">PermissionService</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">checkStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> status <span class="token operator">=</span> <span class="token builtin">AVCaptureDevice</span><span class="token punctuation">.</span><span class="token function">authorizationStatus</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">.</span>video<span class="token punctuation">)</span><span class="token punctuation">.</span>rawValue
        <span class="token keyword">return</span> status <span class="token operator">==</span> <span class="token builtin">AVAuthorizationStatus</span><span class="token punctuation">.</span>authorized<span class="token punctuation">.</span>rawValue
    <span class="token punctuation">}</span>
    
    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">requestAuthorization</span><span class="token punctuation">(</span><span class="token number">_</span> completion<span class="token punctuation">:</span> @escaping <span class="token punctuation">(</span><span class="token builtin">Bool</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">AVCaptureDevice</span><span class="token punctuation">.</span><span class="token function">requestAccess</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">.</span>video<span class="token punctuation">)</span> <span class="token punctuation">{</span> status <span class="token keyword">in</span>
            <span class="token function">completion</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">PhotoPermissionService</span><span class="token punctuation">:</span> <span class="token builtin">PermissionService</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">checkStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Bool</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> status <span class="token operator">=</span> <span class="token builtin">PHPhotoLibrary</span><span class="token punctuation">.</span><span class="token function">authorizationStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rawValue
        <span class="token keyword">return</span> status <span class="token operator">==</span> <span class="token builtin">PHAuthorizationStatus</span><span class="token punctuation">.</span>authorized<span class="token punctuation">.</span>rawValue
    <span class="token punctuation">}</span>
    
    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">requestAuthorization</span><span class="token punctuation">(</span><span class="token number">_</span> completion<span class="token punctuation">:</span> @escaping <span class="token punctuation">(</span><span class="token builtin">Bool</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">PHPhotoLibrary</span><span class="token punctuation">.</span>requestAuthorization <span class="token punctuation">{</span> status <span class="token keyword">in</span>
            <span class="token function">completion</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>rawValue <span class="token operator">==</span> <span class="token builtin">PHAuthorizationStatus</span><span class="token punctuation">.</span>authorized<span class="token punctuation">.</span>rawValue<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage</span>
<span class="token keyword">let</span> permissionServices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">CameraPermissionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">PhotoPermissionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> permissionService <span class="token keyword">in</span> permissionServices <span class="token punctuation">{</span>
    permissionService<span class="token punctuation">.</span>authorize <span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token number">_</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span> <span class="token keyword">in</span>
        <span class="token function">print</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Result:</span>
<span class="token comment">// You have access to Camera</span>
<span class="token comment">// You have access to Photo</span>
</code></pre></div><h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <p>More information on Markdown can be found at the following links:</p> <ul><li><a href="https://medium.com/cocoaacademymag/real-world-ios-design-patterns-3e5aad172094" target="_blank" rel="noopener noreferrer">Medium Real World: iOS Design Patterns<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW6" target="_blank" rel="noopener noreferrer">Apple Cocoa Fundamentals Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stfalcon.com/en/blog/post/ios-patterns" target="_blank" rel="noopener noreferrer">Blog iOS Design Patterns<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://rubygarage.org/blog/swift-design-patterns?utm_source=mybridge&amp;utm_medium=blog&amp;utm_campaign=read_more" target="_blank" rel="noopener noreferrer">Blog Software design patterns<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://medium.com/@chetan15aga/ios-design-patterns-f478abd78132" target="_blank" rel="noopener noreferrer">Medium iOS: Design Patterns<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/architecture-patterns/singleton.html" class="prev">
        Singleton Pattern
      </a></span> <span class="next"><a href="/TIL/architecture-patterns/design-pattern-2.html">
        Architecture Patterns; MV(X) essentials
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.c0d5b1c2.js" defer></script><script src="/TIL/assets/js/2.25c8762d.js" defer></script><script src="/TIL/assets/js/11.b27a3ed5.js" defer></script>
  </body>
</html>
